<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Zysków z Upraw</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0a1f1a 0%, #0d2820 50%, #081712 100%);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function CropProfitCalculator() {
            const [crops, setCrops] = useState([
                {
                    id: 1,
                    name: 'Pszenica',
                    price: 10,
                    product: 'Chleb',
                    productPrice: 25,
                },
            ]);
            const [nextId, setNextId] = useState(2);

            const addCrop = () => {
                setCrops([
                    ...crops,
                    {
                        id: nextId,
                        name: '',
                        price: 0,
                        product: '',
                        productPrice: 0,
                    },
                ]);
                setNextId(nextId + 1);
            };

            const updateCrop = (id, field, value) => {
                setCrops(
                    crops.map((crop) =>
                        crop.id === id ? { ...crop, [field]: value } : crop
                    )
                );
            };

            const deleteCrop = (id) => {
                setCrops(crops.filter((crop) => crop.id !== id));
            };

            const calculateProfit = (crop) => {
                return crop.productPrice - crop.price;
            };

            const calculateMargin = (crop) => {
                if (crop.productPrice === 0) return 0;
                return ((crop.productPrice - crop.price) / crop.productPrice * 100).toFixed(1);
            };

            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="bg-gradient-to-br from-emerald-900/40 to-green-950/40 backdrop-blur-sm border border-emerald-700/30 rounded-2xl shadow-2xl p-6 md:p-8 mb-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <h1 className="text-3xl md:text-5xl font-bold text-emerald-400 mb-2 tracking-tight">
                                        Kalkulator Zysków z Upraw
                                    </h1>
                                    <p className="text-emerald-300/70 text-sm md:text-base">Śledź swoje uprawy i marże zysku</p>
                                </div>
                                <svg className="w-10 h-10 md:w-14 md:h-14 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                                </svg>
                            </div>
                        </div>

                        {/* Main Table Card */}
                        <div className="bg-gradient-to-br from-slate-900/60 to-slate-950/60 backdrop-blur-sm border border-emerald-800/30 rounded-2xl shadow-2xl p-4 md:p-8 mb-6">
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b-2 border-emerald-700/40">
                                            <th className="text-left py-4 px-3 md:px-4 text-emerald-400 font-semibold text-sm md:text-base">
                                                Nazwa Uprawy
                                            </th>
                                            <th className="text-left py-4 px-3 md:px-4 text-emerald-400 font-semibold text-sm md:text-base">
                                                Cena Uprawy
                                            </th>
                                            <th className="text-left py-4 px-3 md:px-4 text-emerald-400 font-semibold text-sm md:text-base">
                                                Produkt
                                            </th>
                                            <th className="text-left py-4 px-3 md:px-4 text-emerald-400 font-semibold text-sm md:text-base">
                                                Cena Produktu
                                            </th>
                                            <th className="text-left py-4 px-3 md:px-4 text-emerald-400 font-semibold text-sm md:text-base">
                                                Zysk
                                            </th>
                                            <th className="text-left py-4 px-3 md:px-4 text-emerald-400 font-semibold text-sm md:text-base">
                                                Marża %
                                            </th>
                                            <th className="py-4 px-2"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {crops.map((crop, index) => {
                                            const profit = calculateProfit(crop);
                                            const margin = calculateMargin(crop);
                                            return (
                                                <tr
                                                    key={crop.id}
                                                    className={`border-b border-emerald-900/20 hover:bg-emerald-900/20 transition-all duration-200 ${
                                                        index % 2 === 0 ? 'bg-slate-900/30' : 'bg-slate-950/30'
                                                    }`}
                                                >
                                                    <td className="py-3 px-3 md:px-4">
                                                        <input
                                                            type="text"
                                                            value={crop.name}
                                                            onChange={(e) =>
                                                                updateCrop(crop.id, 'name', e.target.value)
                                                            }
                                                            placeholder="Wpisz nazwę uprawy"
                                                            className="w-full px-3 py-2 bg-slate-900/80 border border-emerald-800/40 rounded-lg focus:ring-2 focus:ring-emerald-600 focus:border-emerald-600 text-emerald-100 placeholder-emerald-700/50 transition-all text-sm md:text-base"
                                                        />
                                                    </td>
                                                    <td className="py-3 px-3 md:px-4">
                                                        <input
                                                            type="number"
                                                            value={crop.price}
                                                            onChange={(e) =>
                                                                updateCrop(crop.id, 'price', parseFloat(e.target.value) || 0)
                                                            }
                                                            placeholder="0"
                                                            className="w-full px-3 py-2 bg-slate-900/80 border border-emerald-800/40 rounded-lg focus:ring-2 focus:ring-emerald-600 focus:border-emerald-600 text-emerald-100 placeholder-emerald-700/50 transition-all text-sm md:text-base"
                                                        />
                                                    </td>
                                                    <td className="py-3 px-3 md:px-4">
                                                        <input
                                                            type="text"
                                                            value={crop.product}
                                                            onChange={(e) =>
                                                                updateCrop(crop.id, 'product', e.target.value)
                                                            }
                                                            placeholder="Wpisz produkt"
                                                            className="w-full px-3 py-2 bg-slate-900/80 border border-emerald-800/40 rounded-lg focus:ring-2 focus:ring-emerald-600 focus:border-emerald-600 text-emerald-100 placeholder-emerald-700/50 transition-all text-sm md:text-base"
                                                        />
                                                    </td>
                                                    <td className="py-3 px-3 md:px-4">
                                                        <input
                                                            type="number"
                                                            value={crop.productPrice}
                                                            onChange={(e) =>
                                                                updateCrop(
                                                                    crop.id,
                                                                    'productPrice',
                                                                    parseFloat(e.target.value) || 0
                                                                )
                                                            }
                                                            placeholder="0"
                                                            className="w-full px-3 py-2 bg-slate-900/80 border border-emerald-800/40 rounded-lg focus:ring-2 focus:ring-emerald-600 focus:border-emerald-600 text-emerald-100 placeholder-emerald-700/50 transition-all text-sm md:text-base"
                                                        />
                                                    </td>
                                                    <td className="py-3 px-3 md:px-4">
                                                        <span
                                                            className={`font-bold text-sm md:text-base ${
                                                                profit >= 0 ? 'text-emerald-400' : 'text-red-400'
                                                            }`}
                                                        >
                                                            {profit >= 0 ? '+' : ''}
                                                            {profit.toFixed(2)}
                                                        </span>
                                                    </td>
                                                    <td className="py-3 px-3 md:px-4">
                                                        <span
                                                            className={`font-bold px-2 md:px-3 py-1 rounded-full text-xs md:text-sm ${
                                                                margin >= 50
                                                                    ? 'bg-emerald-600/30 text-emerald-300 border border-emerald-500/50'
                                                                    : margin >= 25
                                                                    ? 'bg-yellow-600/30 text-yellow-300 border border-yellow-500/50'
                                                                    : 'bg-red-600/30 text-red-300 border border-red-500/50'
                                                            }`}
                                                        >
                                                            {margin}%
                                                        </span>
                                                    </td>
                                                    <td className="py-3 px-2">
                                                        <button
                                                            onClick={() => deleteCrop(crop.id)}
                                                            className="p-2 text-red-400 hover:bg-red-900/30 hover:border-red-600/50 border border-transparent rounded-lg transition-all duration-200"
                                                        >
                                                            <svg className="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                                            </svg>
                                                        </button>
                                                    </td>
                                                </tr>
                                            );
                                        })}
                                    </tbody>
                                </table>
                            </div>

                            <button
                                onClick={addCrop}
                                className="mt-6 flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-700 to-emerald-600 hover:from-emerald-600 hover:to-emerald-500 text-white rounded-lg transition-all duration-200 font-semibold shadow-lg shadow-emerald-900/50 border border-emerald-500/30 text-sm md:text-base"
                            >
                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                                </svg>
                                Dodaj Uprawę
                            </button>
                        </div>

                        {/* Stats Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
                            <div className="bg-gradient-to-br from-emerald-900/50 to-emerald-950/50 backdrop-blur-sm border border-emerald-700/40 rounded-xl p-6 shadow-xl hover:shadow-emerald-900/30 transition-all duration-300">
                                <p className="text-emerald-400 font-semibold mb-2 text-sm">Liczba Upraw</p>
                                <p className="text-4xl font-bold text-emerald-300">{crops.length}</p>
                            </div>
                            <div className="bg-gradient-to-br from-green-900/50 to-green-950/50 backdrop-blur-sm border border-green-700/40 rounded-xl p-6 shadow-xl hover:shadow-green-900/30 transition-all duration-300">
                                <p className="text-green-400 font-semibold mb-2 text-sm">Średni Zysk</p>
                                <p className="text-4xl font-bold text-green-300">
                                    {crops.length > 0
                                        ? (
                                            crops.reduce((sum, crop) => sum + calculateProfit(crop), 0) /
                                            crops.length
                                        ).toFixed(2)
                                        : '0.00'}
                                </p>
                            </div>
                            <div className="bg-gradient-to-br from-teal-900/50 to-teal-950/50 backdrop-blur-sm border border-teal-700/40 rounded-xl p-6 shadow-xl hover:shadow-teal-900/30 transition-all duration-300">
                                <p className="text-teal-400 font-semibold mb-2 text-sm">Średnia Marża</p>
                                <p className="text-4xl font-bold text-teal-300">
                                    {crops.length > 0
                                        ? (
                                            crops.reduce(
                                                (sum, crop) => sum + parseFloat(calculateMargin(crop)),
                                                0
                                            ) / crops.length
                                        ).toFixed(1)
                                        : '0.0'}
                                    %
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<CropProfitCalculator />, document.getElementById('root'));
    </script>
</body>
</html>